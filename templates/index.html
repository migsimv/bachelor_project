<!DOCTYPE html>
<html>
<head>
    <title>Kursinis</title>
    <style>
        body {
            background-color: beige;
            display: flex;
            flex-direction: row;
        }
        /* Center the form on the left side */
        .form-container {
            margin: auto;
            margin-left:10px;
            max-width: 300px;
        }
        /* Style form elements */
        input[type="file"],
        input[type="submit"] {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            box-sizing: border-box;
        }
        input[type="submit"] {
            background-color: #84cd87;
            color: white;
            border: none;
            cursor: pointer;
        }
        .form-container {
            border-right: 2px solid #5d5c5c;
            padding-right: 20px;
        }
        button{
            background-color: #4CAF50;
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            box-sizing: border-box;
            color: white;
            border: none;
            cursor: pointer;
        }
        /* Text area and button container on the right side */
        .text-area-container {
            text-align: center;
            flex: 1;
            padding: 20px;
            /* margin-left:300px; */
            flex-direction: column;
            justify-content: space-between;
        }
        .test{
            text-align: left;
            flex: 1;
            margin-left: 100px;
            margin-right: 60px;
            flex-direction: column;
            justify-content: space-between;
        }
        /* Adjust the height of the textarea */
        textarea {
            width: 100%;
            height: 150px; /* Adjust the height as needed */
            box-sizing: border-box;
        }
        /* Style the button for saving content as a new file */
        .save-btn {
            padding: 8px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }
        #file-select option.selected {
            background-color: #84cd87;
            color: white;
        }
    </style>
</head>
<body>
    <div class="form-container">
        <h1>Gretimų kaimynių sąrašas</h1>
        <form method="post" enctype="multipart/form-data">
            Įkelkite naują failą, pasirinkite naudotą anksčiau arba sukurkite naują .txt failą su grafo gretimų kaimynių sąrašu:
            <input type="file" name="fileUpl" id="fileUpl" >
            Anksčiau naudoti failai:
            <br>
            <select id="fileOption"  name="selected_file">
                <option value="" disabled selected>Select a file...</option>
                {% for file in files %}
                    <option value="{{ file }}">{{ file }}</option>
                {% endfor %}
            </select>
            <br>
            <br>
            Sukurkite naują failą:
            <br>
            <textarea id="new-content"></textarea>
            <br>
            <br>
            <br>
            <label for="digit">Pasirinkite k:</label>
            <input value='2' type="number" name="digit" id="digit" required>
            <br>
            <br>
            <button class="submit">Rasti šerdį</button>
        </form>
        <br>


    </div>

    <div class="text-area-container">
      <h1>Grafo k - šerdies radimas</h1>
      <div class="test">
        <b>Naudojimas: </b>
        <br>
        1. Pasirinkite failą su gretimų viršūnių sąrašu, jau naudotą failą rasite 'Anksčiau naudoti failai sąraše
        arba galite sukurti naują failą. Failo struktūra turi atrodyti taip: '1 -> 2, 4', čia 1 yra viršūnės pavadinimas, o 2 ir 4
        tos viršūnės kaimynės, kiekviena viršūnė aprašoma nauja eilute.'
        <br>
        2. Pasirinkite k.
        <br>
        3. Spauskite mygtuką "Rasti šerdį"
        <br><br>
        <b>Rezultatai: </b> <br>
        1. Tekstinis failas su šerdies gretimų kaimynių sąrašu
        <br>
        2. Diagramos su informacija apie šerdį.
        <br>
        3. Informacija apie komponentes bei jų skaičių.
        <br>
        4. Dar bus pildoma.
      </div>
      
    </div>

    <script>
        function saveNewFile() {
            const content = document.getElementById("new-content").value;
            const filename = prompt("Enter the filename for the new text file:");
            if (filename !== null && filename.trim() !== "") {
                const formData = new FormData();
                formData.append('filename', filename);
                formData.append('content', content);
                fetch('/save_new_file', {
                    method: 'POST',
                    body: formData
                })
                .then(response => {
                    if (response.ok) {
                        alert(`New file "${filename}" saved successfully.`);
                    } else {
                        alert(`Error saving the new file.`);
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('Error saving the new file.');
                });
            }
        }
    </script>
</body>
</html>
